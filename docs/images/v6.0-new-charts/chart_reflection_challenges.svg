<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="380" viewBox="0 0 800 380">
  <defs>
    <linearGradient id="ch1Grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E76F51"/><stop offset="100%" style="stop-color:#F4A261"/>
    </linearGradient>
    <linearGradient id="ch2Grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2A9D8F"/><stop offset="100%" style="stop-color:#52B788"/>
    </linearGradient>
    <linearGradient id="ch3Grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4A6FA5"/><stop offset="100%" style="stop-color:#6090C0"/>
    </linearGradient>
    <filter id="shadowR"><feDropShadow dx="1" dy="2" stdDeviation="3" flood-opacity="0.12"/></filter>
  </defs>
  
  <rect width="800" height="380" fill="#FAFBFC"/>
  
  <!-- 标题 -->
  <text x="400" y="30" text-anchor="middle" font-family="SimHei, sans-serif" font-size="18" font-weight="bold" fill="#2C3E50">Reflection机制移动端适配三项挑战</text>
  
  <!-- 挑战1：计算开销控制 -->
  <g transform="translate(30, 55)">
    <rect x="0" y="0" width="240" height="300" rx="10" fill="#FFFFFF" stroke="#E76F51" stroke-width="2" filter="url(#shadowR)"/>
    <rect x="0" y="0" width="240" height="45" rx="10 10 0 0" fill="url(#ch1Grad)"/>
    <text x="120" y="28" text-anchor="middle" font-family="SimHei, sans-serif" font-size="13" fill="white" font-weight="bold">挑战一：计算开销控制</text>
    
    <g transform="translate(15, 60)">
      <text x="0" y="0" font-family="SimHei, sans-serif" font-size="11" fill="#E65100">事件驱动触发</text>
      <rect x="0" y="8" width="210" height="28" rx="4" fill="#FFF3E0"/>
      <text x="105" y="27" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">• 单次导入 &gt; 50张图片</text>
      <rect x="0" y="42" width="210" height="28" rx="4" fill="#FFF3E0"/>
      <text x="105" y="61" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">• 地理位置变化 &gt; 50km</text>
      <rect x="0" y="76" width="210" height="28" rx="4" fill="#FFF3E0"/>
      <text x="105" y="95" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">• 场景信息熵 &lt; 0.5</text>
    </g>
    
    <g transform="translate(15, 180)">
      <text x="0" y="0" font-family="SimHei, sans-serif" font-size="11" fill="#E65100">定时触发条件</text>
      <rect x="0" y="8" width="210" height="28" rx="4" fill="#FFEBEE"/>
      <text x="105" y="27" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">• 设备充电 + 屏幕关闭</text>
      <rect x="0" y="42" width="210" height="28" rx="4" fill="#FFEBEE"/>
      <text x="105" y="61" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">• 凌晨2:00-5:00空闲时段</text>
      <rect x="0" y="76" width="210" height="28" rx="4" fill="#FFEBEE"/>
      <text x="105" y="95" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">• WorkManager后台调度</text>
    </g>
  </g>
  
  <!-- 挑战2：推断结果可信度 -->
  <g transform="translate(280, 55)">
    <rect x="0" y="0" width="240" height="300" rx="10" fill="#FFFFFF" stroke="#2A9D8F" stroke-width="2" filter="url(#shadowR)"/>
    <rect x="0" y="0" width="240" height="45" rx="10 10 0 0" fill="url(#ch2Grad)"/>
    <text x="120" y="28" text-anchor="middle" font-family="SimHei, sans-serif" font-size="13" fill="white" font-weight="bold">挑战二：推断可信度</text>
    
    <g transform="translate(15, 60)">
      <text x="0" y="0" font-family="SimHei, sans-serif" font-size="11" fill="#00695C">置信度计算公式</text>
      <rect x="0" y="8" width="210" height="50" rx="4" fill="#E0F2F1"/>
      <text x="105" y="28" text-anchor="middle" font-family="Arial" font-size="9" fill="#00695C">Confidence =</text>
      <text x="105" y="48" text-anchor="middle" font-family="Arial" font-size="9" fill="#00695C">1/(1+e^-(w₁N+w₂S+w₃T))</text>
    </g>
    
    <g transform="translate(15, 130)">
      <text x="0" y="0" font-family="SimHei, sans-serif" font-size="11" fill="#00695C">参数含义</text>
      <rect x="0" y="8" width="210" height="22" rx="3" fill="#E8F5E9"/>
      <text x="105" y="23" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">N = 支撑证据数量 (w₁=0.4)</text>
      <rect x="0" y="35" width="210" height="22" rx="3" fill="#E8F5E9"/>
      <text x="105" y="50" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">S = 证据强度 (w₂=0.35)</text>
      <rect x="0" y="62" width="210" height="22" rx="3" fill="#E8F5E9"/>
      <text x="105" y="77" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">T = 时间跨度因子 (w₃=0.25)</text>
    </g>
    
    <g transform="translate(15, 235)">
      <text x="0" y="0" font-family="SimHei, sans-serif" font-size="11" fill="#00695C">阈值筛选</text>
      <rect x="0" y="8" width="210" height="40" rx="4" fill="#C8E6C9"/>
      <text x="105" y="22" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#2E7D32">置信度 &lt; 0.6</text>
      <text x="105" y="40" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#2E7D32">→ 标记「待验证」不展示</text>
    </g>
  </g>
  
  <!-- 挑战3：端侧算力适配 -->
  <g transform="translate(530, 55)">
    <rect x="0" y="0" width="240" height="300" rx="10" fill="#FFFFFF" stroke="#4A6FA5" stroke-width="2" filter="url(#shadowR)"/>
    <rect x="0" y="0" width="240" height="45" rx="10 10 0 0" fill="url(#ch3Grad)"/>
    <text x="120" y="28" text-anchor="middle" font-family="SimHei, sans-serif" font-size="13" fill="white" font-weight="bold">挑战三：端侧算力适配</text>
    
    <g transform="translate(15, 60)">
      <text x="0" y="0" font-family="SimHei, sans-serif" font-size="11" fill="#1565C0">模型配置</text>
      <rect x="0" y="8" width="210" height="28" rx="4" fill="#E3F2FD"/>
      <text x="105" y="27" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">Qwen3-VL-2B + INT4量化</text>
      <rect x="0" y="42" width="210" height="28" rx="4" fill="#E3F2FD"/>
      <text x="105" y="61" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">MNN推理框架</text>
    </g>
    
    <g transform="translate(15, 140)">
      <text x="0" y="0" font-family="SimHei, sans-serif" font-size="11" fill="#1565C0">性能指标</text>
      <rect x="0" y="8" width="100" height="50" rx="4" fill="#BBDEFB"/>
      <text x="50" y="28" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#1565C0">单次推理</text>
      <text x="50" y="48" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="#0D47A1">8-12s</text>
      <rect x="110" y="8" width="100" height="50" rx="4" fill="#BBDEFB"/>
      <text x="160" y="28" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#1565C0">模型大小</text>
      <text x="160" y="48" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="#0D47A1">~1.5GB</text>
    </g>
    
    <g transform="translate(15, 220)">
      <text x="0" y="0" font-family="SimHei, sans-serif" font-size="11" fill="#1565C0">执行策略</text>
      <rect x="0" y="8" width="210" height="55" rx="4" fill="#E8EAF6"/>
      <text x="105" y="25" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">• 后台执行，不影响前台体验</text>
      <text x="105" y="42" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">• 结构化提示词模板</text>
      <text x="105" y="58" text-anchor="middle" font-family="SimSun, serif" font-size="9" fill="#455A64">• 输出：事实描述 + 置信度</text>
    </g>
  </g>
</svg>