# MNN Chat 性能验证指南

## 阶段一：验证设备可行性

在开发自定义应用之前，先用官方 MNN Chat APK 验证你的设备（红魔8 Pro）能否流畅运行 Qwen3-VL-2B。

## 步骤 1：下载安装

### APK 下载地址
- **官方下载**: https://meta.alicdn.com/data/mnn/mnn_chat_0_7_5.apk
- **Google Play**: https://play.google.com/store/apps/details?id=com.alibaba.mnnllm.android.release

### 安装
1. 下载 APK 到手机
2. 打开 APK 文件安装（可能需要允许安装未知来源应用）

## 步骤 2：下载模型

1. 打开 MNN Chat 应用
2. 在模型列表中找到 **Qwen3-VL-2B-Instruct**
3. 点击下载（约 1.5GB，建议使用 Wi-Fi）
4. 等待下载完成

> **提示**: 可以选择从 ModelScope 或 HuggingFace 下载

## 步骤 3：测试图像描述

### 测试流程

1. 选择已下载的 Qwen3-VL-2B 模型
2. 点击附件按钮，选择一张测试图片
3. 输入提示词：`请详细描述这张图片的内容。`
4. 点击发送，开始推理

### 记录性能指标

| 指标 | 你的测试结果 | 目标值 |
|------|-------------|--------|
| 首 Token 时间 (Prefill) | ___ 秒 | < 5 秒 |
| 生成速度 (Decode) | ___ tok/s | >= 8 tok/s |
| 总响应时间 | ___ 秒 | - |
| 内存占用 | ___ GB | < 6 GB |
| 设备温度 | ___ °C | < 45°C |

### 如何查看性能指标

MNN Chat 应用在设置中有 Benchmark 功能：
1. 点击右上角设置
2. 找到 Benchmark 或性能测试
3. 查看 Prefill 和 Decode 速度

## 步骤 4：验收标准

### 通过标准

- [x] Decode 速度 >= 8 tok/s
- [x] 首 Token 时间 < 5 秒
- [x] 无内存溢出 (OOM) 崩溃
- [x] 无明显卡顿
- [x] 设备温度可控（不烫手）

### 如果未通过

| 问题 | 可能原因 | 解决方案 |
|------|----------|----------|
| OOM 崩溃 | 内存不足 | 清理后台应用，重启手机 |
| 速度很慢 | 后台进程占用 | 关闭其他应用 |
| 严重发热 | 散热不足 | 在凉爽环境测试 |
| 应用闪退 | 兼容性问题 | 尝试更新系统 |

## 预期结果（骁龙8+ Gen 1, 12GB RAM）

基于 MNN 官方数据和类似设备测试：

| 指标 | 预期范围 |
|------|----------|
| Prefill | 2-4 秒 |
| Decode | 10-20 tok/s |
| 内存占用 | 3-4 GB |

## 测试完成后

验证通过后，可以继续使用我们开发的自定义图像描述应用。

如果测试结果不理想，可以考虑：
1. 使用更小的模型（如 Qwen3-0.6B）
2. 调整推理参数（减少 max_tokens）
3. 使用 INT4 量化版本
