<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="750" viewBox="0 0 1000 750">
  <defs>
    <!-- 深色配色 -->
    <linearGradient id="of_step" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3d5a80"/><stop offset="100%" style="stop-color:#2c4a70"/>
    </linearGradient>
    <linearGradient id="of_mem" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2d6a5a"/><stop offset="100%" style="stop-color:#1d5a4a"/>
    </linearGradient>
    <filter id="shadowOF"><feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/></filter>
    <marker id="arrowOF" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#2c4a70"/>
    </marker>
  </defs>
  <rect width="1000" height="750" fill="#ffffff"/>
  
  <!-- 标题区 -->
  <rect x="0" y="0" width="1000" height="75" fill="#f0f4f8"/>
  <text x="500" y="35" text-anchor="middle" font-family="SimHei" font-size="24" font-weight="bold" fill="#1a2a3a">拾光系统总流程图</text>
  <text x="500" y="58" text-anchor="middle" font-family="SimSun" font-size="13" fill="#3a4a5a">Overall Process Flow - 从截图到检索的完整链路（含层次化记忆）</text>
  <line x1="100" y1="73" x2="900" y2="73" stroke="#c0d0e0" stroke-width="1"/>
  
  <!-- 主流程线 -->
  <line x1="90" y1="235" x2="920" y2="235" stroke="#d0dae5" stroke-width="4"/>
  
  <!-- Step 1: 用户截图 -->
  <rect x="70" y="125" width="115" height="220" rx="10" fill="url(#of_step)" filter="url(#shadowOF)"/>
  <text x="127" y="175" text-anchor="middle" font-family="Arial" font-size="32" fill="white">📸</text>
  <text x="127" y="215" text-anchor="middle" font-family="SimHei" font-size="14" fill="white" font-weight="bold">用户截图</text>
  <text x="127" y="238" text-anchor="middle" font-family="Arial" font-size="11" fill="white">Screenshot</text>
  <rect x="82" y="255" width="90" height="35" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="127" y="278" text-anchor="middle" font-family="SimSun" font-size="10" fill="white" font-weight="bold">触发监听</text>
  <text x="127" y="330" text-anchor="middle" font-family="SimHei" font-size="13" fill="white" font-weight="bold">①</text>
  
  <!-- 箭头1 -->
  <line x1="190" y1="235" x2="220" y2="235" stroke="#2c4a70" stroke-width="3" marker-end="url(#arrowOF)"/>
  
  <!-- Step 2: 截图监听 -->
  <rect x="225" y="125" width="115" height="220" rx="10" fill="url(#of_step)" filter="url(#shadowOF)"/>
  <text x="282" y="175" text-anchor="middle" font-family="Arial" font-size="32" fill="white">👁️</text>
  <text x="282" y="215" text-anchor="middle" font-family="SimHei" font-size="14" fill="white" font-weight="bold">截图监听</text>
  <text x="282" y="238" text-anchor="middle" font-family="Arial" font-size="11" fill="white">Detection</text>
  <rect x="237" y="255" width="90" height="35" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="282" y="278" text-anchor="middle" font-family="SimSun" font-size="10" fill="white" font-weight="bold">Screenshot API</text>
  <text x="282" y="330" text-anchor="middle" font-family="SimHei" font-size="13" fill="white" font-weight="bold">②</text>
  
  <!-- 箭头2 -->
  <line x1="345" y1="235" x2="375" y2="235" stroke="#2c4a70" stroke-width="3" marker-end="url(#arrowOF)"/>
  
  <!-- Step 3: 多层处理 -->
  <rect x="380" y="125" width="115" height="220" rx="10" fill="url(#of_step)" filter="url(#shadowOF)"/>
  <text x="437" y="175" text-anchor="middle" font-family="Arial" font-size="32" fill="white">⚙️</text>
  <text x="437" y="215" text-anchor="middle" font-family="SimHei" font-size="14" fill="white" font-weight="bold">多层处理</text>
  <text x="437" y="238" text-anchor="middle" font-family="Arial" font-size="11" fill="white">Pipeline</text>
  <rect x="392" y="255" width="90" height="55" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="437" y="275" text-anchor="middle" font-family="SimSun" font-size="9" fill="white" font-weight="bold">L1: &lt;500ms</text>
  <text x="437" y="290" text-anchor="middle" font-family="SimSun" font-size="9" fill="white" font-weight="bold">L2: 结构化</text>
  <text x="437" y="305" text-anchor="middle" font-family="SimSun" font-size="9" fill="white" font-weight="bold">L3: VLM 3-5s</text>
  <text x="437" y="330" text-anchor="middle" font-family="SimHei" font-size="13" fill="white" font-weight="bold">③</text>
  
  <!-- 箭头3 -->
  <line x1="500" y1="235" x2="530" y2="235" stroke="#2c4a70" stroke-width="3" marker-end="url(#arrowOF)"/>
  
  <!-- Step 4: 向量存储 -->
  <rect x="535" y="125" width="115" height="220" rx="10" fill="url(#of_step)" filter="url(#shadowOF)"/>
  <text x="592" y="175" text-anchor="middle" font-family="Arial" font-size="32" fill="white">💾</text>
  <text x="592" y="215" text-anchor="middle" font-family="SimHei" font-size="14" fill="white" font-weight="bold">向量存储</text>
  <text x="592" y="238" text-anchor="middle" font-family="Arial" font-size="11" fill="white">Embedding</text>
  <rect x="547" y="255" width="90" height="35" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="592" y="278" text-anchor="middle" font-family="SimSun" font-size="10" fill="white" font-weight="bold">384维向量</text>
  <text x="592" y="330" text-anchor="middle" font-family="SimHei" font-size="13" fill="white" font-weight="bold">④</text>
  
  <!-- 分支箭头到记忆系统 -->
  <path d="M650,235 L695,235 L695,405" stroke="#2d6a5a" stroke-width="2.5" fill="none" marker-end="url(#arrowOF)"/>
  
  <!-- ★★★ 核心卖点：层次化记忆系统 ★★★ -->
  <rect x="580" y="420" width="290" height="200" rx="12" fill="#f5f8f5" stroke="#2d6a5a" stroke-width="2" filter="url(#shadowOF)"/>
  <rect x="580" y="420" width="290" height="40" rx="12" fill="url(#of_mem)"/>
  <text x="725" y="446" text-anchor="middle" font-family="SimHei" font-size="14" fill="white" font-weight="bold">⭐ 层次化记忆系统</text>
  
  <rect x="600" y="475" width="250" height="40" rx="5" fill="#e5f0e8" stroke="#3d7a6a" stroke-width="1.5"/>
  <text x="725" y="493" text-anchor="middle" font-family="SimHei" font-size="11" fill="#1a3a2a" font-weight="bold">短期记忆 (ImageMemory)</text>
  <text x="725" y="508" text-anchor="middle" font-family="SimSun" font-size="9" fill="#2a4a3a">单图描述 → "照片是什么"</text>
  
  <rect x="600" y="525" width="250" height="40" rx="5" fill="#d5e8db" stroke="#2d6a5a" stroke-width="1.5"/>
  <text x="725" y="543" text-anchor="middle" font-family="SimHei" font-size="11" fill="#1a3a2a" font-weight="bold">长期记忆 (HighLevelFact)</text>
  <text x="725" y="558" text-anchor="middle" font-family="SimSun" font-size="9" fill="#2a4a3a">Reflection推断 → "用户经历了什么"</text>
  
  <rect x="600" y="575" width="250" height="40" rx="5" fill="#c5e0d0" stroke="#1d5a4a" stroke-width="1.5"/>
  <text x="725" y="593" text-anchor="middle" font-family="SimHei" font-size="11" fill="#1a3a2a" font-weight="bold">隐式记忆 (UserPreference)</text>
  <text x="725" y="608" text-anchor="middle" font-family="SimSun" font-size="9" fill="#2a4a3a">偏好学习 → "无声的个性化"</text>
  
  <!-- 记忆到搜索的箭头 -->
  <path d="M580,520 L420,520 L420,475" stroke="#2d6a5a" stroke-width="2" fill="none" stroke-dasharray="6,4" marker-end="url(#arrowOF)"/>
  <text x="485" y="510" font-family="SimSun" font-size="10" fill="#2d6a5a" font-weight="bold">上下文增强</text>
  
  <!-- 下方搜索流程 -->
  <!-- Step 5: 语义搜索 -->
  <rect x="380" y="430" width="115" height="130" rx="10" fill="url(#of_step)" filter="url(#shadowOF)"/>
  <text x="437" y="480" text-anchor="middle" font-family="Arial" font-size="32" fill="white">🔍</text>
  <text x="437" y="520" text-anchor="middle" font-family="SimHei" font-size="14" fill="white" font-weight="bold">语义搜索</text>
  <text x="437" y="543" text-anchor="middle" font-family="Arial" font-size="11" fill="white">Search</text>
  <text x="437" y="553" text-anchor="middle" font-family="SimHei" font-size="13" fill="white" font-weight="bold">⑤</text>
  
  <!-- 箭头5 -->
  <line x1="375" y1="495" x2="275" y2="495" stroke="#2c4a70" stroke-width="3" marker-end="url(#arrowOF)"/>
  
  <!-- Step 6: 返回结果 -->
  <rect x="155" y="430" width="115" height="130" rx="10" fill="url(#of_step)" filter="url(#shadowOF)"/>
  <text x="212" y="480" text-anchor="middle" font-family="Arial" font-size="32" fill="white">✅</text>
  <text x="212" y="520" text-anchor="middle" font-family="SimHei" font-size="14" fill="white" font-weight="bold">精准定位</text>
  <text x="212" y="543" text-anchor="middle" font-family="Arial" font-size="11" fill="white">Results</text>
  <text x="212" y="553" text-anchor="middle" font-family="SimHei" font-size="13" fill="white" font-weight="bold">⑥</text>
  
  <!-- 用户查询入口 -->
  <rect x="50" y="430" width="95" height="130" rx="10" fill="#e8f0f5" stroke="#a0b8d0" stroke-width="2" filter="url(#shadowOF)"/>
  <text x="97" y="480" text-anchor="middle" font-family="Arial" font-size="28" fill="#3d5a80">💬</text>
  <text x="97" y="512" text-anchor="middle" font-family="SimHei" font-size="12" fill="#2c4a70" font-weight="bold">自然语言</text>
  <text x="97" y="532" text-anchor="middle" font-family="Arial" font-size="10" fill="#4a6a8a">Query</text>
  
  <!-- 查询箭头 -->
  <line x1="145" y1="495" x2="375" y2="495" stroke="#6090c0" stroke-width="2" stroke-dasharray="6,4"/>
  <text x="260" y="483" text-anchor="middle" font-family="SimSun" font-size="10" fill="#3a5a7a" font-weight="bold">「上周的咖啡发票」</text>
  
  <!-- 端云协同标注 -->
  <rect x="690" y="135" width="175" height="55" rx="8" fill="#f5f8fa" stroke="#6090c0" stroke-width="1.5"/>
  <text x="777" y="158" text-anchor="middle" font-family="SimHei" font-size="11" fill="#3a5a80" font-weight="bold">端云协同推理</text>
  <text x="777" y="178" text-anchor="middle" font-family="SimSun" font-size="10" fill="#4a6a8a">2B端侧(默认) ↔ 235B云端</text>
  
  <!-- 隐私标注 -->
  <rect x="875" y="135" width="105" height="55" rx="8" fill="#f5f8f5" stroke="#3d7a6a" stroke-width="1.5"/>
  <text x="927" y="158" text-anchor="middle" font-family="SimHei" font-size="11" fill="#2d5a4a" font-weight="bold">🔒 隐私优先</text>
  <text x="927" y="178" text-anchor="middle" font-family="SimSun" font-size="10" fill="#3a5a4a">数据不出端</text>
  
  <!-- 底部流程说明 -->
  <rect x="50" y="640" width="900" height="90" rx="10" fill="#f5f8fa" stroke="#c0d0e0"/>
  <text x="500" y="668" text-anchor="middle" font-family="SimHei" font-size="13" fill="#1a2a3a" font-weight="bold">完整处理链路</text>
  <text x="500" y="695" text-anchor="middle" font-family="SimSun" font-size="12" fill="#2a3a4a">
    ① 截图触发 → ② 实时监听 → ③ 分层处理 → ④ 向量入库 → ⑤ 语义检索 → ⑥ 精准返回
  </text>
  <text x="500" y="720" text-anchor="middle" font-family="SimSun" font-size="11" fill="#3a4a5a">
    核心差异化：层次化记忆系统实现从"照片是什么"到"用户经历了什么"的认知跃升
  </text>
</svg>