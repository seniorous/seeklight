# Capability: 时间筛选 (Time Filter)

## ADDED Requirements

### Requirement: 快捷时间范围选择

系统 SHALL 提供常用时间范围的快捷选择选项。

#### Scenario: 选择"今天"

- **GIVEN** 用户在记忆库页面
- **WHEN** 点击时间筛选并选择 "今天"
- **THEN** 显示今天 00:00 至当前时间创建的记忆
- **AND** 筛选状态显示 "今天"

#### Scenario: 选择"本周"

- **GIVEN** 用户在记忆库页面
- **WHEN** 选择 "本周"
- **THEN** 显示本周一 00:00 至当前时间创建的记忆

#### Scenario: 选择"本月"

- **GIVEN** 用户在记忆库页面
- **WHEN** 选择 "本月"
- **THEN** 显示本月 1 日 00:00 至当前时间创建的记忆

#### Scenario: 选择"今年"

- **GIVEN** 用户在记忆库页面
- **WHEN** 选择 "今年"
- **THEN** 显示今年 1 月 1 日 00:00 至当前时间创建的记忆

---

### Requirement: 自定义日期范围

系统 SHALL 支持用户自定义开始和结束日期进行筛选。

#### Scenario: 选择自定义日期范围

- **GIVEN** 用户点击 "自定义"
- **WHEN** 选择开始日期为 2024-06-01，结束日期为 2024-08-31
- **THEN** 显示该时间范围内创建的记忆
- **AND** 筛选状态显示 "2024/06/01 - 2024/08/31"

#### Scenario: 日期范围验证

- **GIVEN** 用户在自定义日期选择器
- **WHEN** 选择的结束日期早于开始日期
- **THEN** 显示错误提示 "结束日期不能早于开始日期"
- **AND** 不执行筛选

#### Scenario: 未来日期限制

- **GIVEN** 用户在自定义日期选择器
- **WHEN** 尝试选择未来日期
- **THEN** 未来日期不可选择（禁用状态）

---

### Requirement: 时间筛选 UI

系统 SHALL 提供直观的时间筛选交互界面。

#### Scenario: 打开时间筛选器

- **GIVEN** 用户在记忆库页面
- **WHEN** 点击筛选按钮
- **THEN** 从底部弹出时间筛选面板（Bottom Sheet）
- **AND** 显示快捷选项和自定义入口

#### Scenario: 显示当前筛选状态

- **GIVEN** 已应用时间筛选 "本月"
- **WHEN** 查看记忆库页面
- **THEN** 搜索栏下方显示筛选标签 "本月"
- **AND** 标签可点击进入修改

#### Scenario: 清除时间筛选

- **GIVEN** 已应用时间筛选
- **WHEN** 点击筛选标签的关闭图标
- **THEN** 清除时间筛选
- **AND** 显示所有记忆

---

### Requirement: 时间筛选与搜索联动

系统 SHALL 支持时间筛选与关键词/语义搜索的组合使用。

#### Scenario: 组合筛选

- **GIVEN** 已设置时间筛选为 "本月"
- **WHEN** 输入搜索词 "旅行"
- **THEN** 仅在本月记忆中搜索包含 "旅行" 的结果

#### Scenario: 筛选结果计数

- **GIVEN** 时间筛选后有 20 条记忆
- **WHEN** 应用筛选
- **THEN** 显示 "本月 · 20 条记忆"

#### Scenario: 无结果提示

- **GIVEN** 时间筛选范围内没有记忆
- **WHEN** 应用筛选
- **THEN** 显示空状态 "该时间范围内没有记忆"
- **AND** 提供 "查看全部" 快捷入口
